 User.findById(userId, (err, user) => {
                console.log(user.cart)
                for (let i=0; i < user.cart.length; i++) {
                    if (user.cart[i].productId._id.toString() === prodId.toString()) {

                        // item in cart update quantity

                        let cartQuantity = user.cart[i].quantity
                        quantity += cartQuantity 
                        console.log('item in cart')
                        // total price for the product
                        let total = parseInt(quantity) * parseInt(price)

                        User.findById( userId, (err, user) => {
                            //   console.log(newItem)
                            user.cart.push({totalPrice: total})
                            user.save((err)=>{
                                console.log(err)
                                // res.redirect('/shop/cart')
                            })
                        })
                    }else{ // Item not in cart create new product

                        // total price for the product
                        let total = parseInt(quantity) * parseInt(price)
                        const newItem = {
                            productId : prodId,
                            quantity: parseInt(quantity),
                            totalPrice: parseInt(total)
                        }
                        User.findById( userId, (err, user) => {
                            //   console.log(newItem)
                            user.cart.push(newItem)
                            user.save((err)=>{
                                console.log(err)
                            })
                        })
                    }
                    res.redirect('/shop/cart')
                }
            })